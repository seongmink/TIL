# Git 명령어

## Amend

커밋 후 수정 못한 파일이 존재할 때, 방금 만든 커밋에 추가한다. 이럴때 amend 옵션을 사용한다. amend는 기존 커밋에 추가(메시지, 코드, 파일 등)할 사항이 있는 경우 마지막 커밋에 추가로 덧 붙이는 옵션이다. 

이력 변경이 일어나기 때문에 혼자 쓰는 브랜치가 아니면 히스토리가 꼬일 수 있으니 주의해서 사용해야 한다.

- CLI

  ```
  $ git add [filename] // filename을 가진 파일을 stage에 올림
  $ git commit --amend -m "commit message" // git amend 옵션으로 commit 명령
  ```

- Source Tree
  1. 커밋(파일 상태) 창 진입
  2. 우측 하단 '커밋 옵션' 클릭
  3. '마지막 커밋 정정(수정)' 선택
  4. 커밋 메시지 입력 후 커밋



## Stash

하던 작업을 잠시 멈추고 임시로 저장하고 싶고, 커밋을 만들고 싶지 않은 경우 사용한다.

- CLI

  ```
  $ git stash // git stash == git stash save
  $ git stash 
  ```

  위 작업을 진행하면 임시로 저장된다.

  임시로 저장된 목록을 확인하기 위해서는 다음과 같이 명령어를 사용하면 된다.

  ```
  $ git stash list
  ```

  리스트를 확인하고, 저장된 작업들을 불러오고 싶다면 다음과 같이 명령어를 사용하면 된다.

  ```
  $ git stash apply // 가장 최근 stash 저장 된 내용을 가져옴
  $ git stash apply [stash 이름] // list에서 확인된 [stash 이름]을 가진 stash를 불러온다.
  ```

  stash는 apply를 해서 불러오더라도 여전히 남아있으므로 삭제를 해줘야 한다.

  ```
  $ git stash drop // 가장 최근 stash 저장 된 내용을 삭제
  $ git stash drop [stash 이름] // list에서 확인된 [stash 이름]을 가진 stash를 삭제한다.
  ```

- Source Tree

  1. 상단의 스태시 버튼을 클릭한다.
  2. 메시지 입력 후 '스태시(확인)'을 클릭한다.

  불러오고 싶다면 좌측 탭에서 '스태시(치워두기)'에서 더블 클릭이나 우클릭 후 '스태시 적용'을 클릭한다.

  만약, 삭제하고 싶다면 우클릭 후 '스태시 삭제'를 클릭하면 된다.



## Reset

예전 커밋으로 브랜치를 되돌리고 싶을 때 사용한다. reset 옵션에는 soft, mixed(default), hard가 존재한다.

이력 변경이 일어나기 때문에 혼자 쓰는 브랜치가 아니면 히스토리가 꼬일 수 있으니 주의해서 사용해야 한다.

- CLI

  ```
  $ git reset --hard HEAD^[시점] // 현재로부터 "시점"만큼의 이전 커밋으로 돌림 e.g. HEAD^1
  $ git reset --hard [commit id] // git log를 사용하여 커밋아이디를 학인 후 돌아가고 싶은 시점으로 변경
  ```

- Source Tree
  1. 커밋 목록에서 되돌리고 싶은 커밋을 선택한다.
  2. 커밋을 우클릭 후 '이 커밋까지 현재 브랜치를 초기화' 버튼을 클릭한다. (사용 모드 = hard 모드)
  3. 원격 저장소에 영향을 미치는 작업이므로 force push 를 진행한다. (옵션에서 강제 푸시 가능 옵션 사용)



## Revert

커밋의 변경사항을 되돌리고 싶을 때 사용한다.

reset과 다른점은 history를 초기화하고, revert는 새로 쌓으면서 변경하는 점이다. revert를 사용하게 된다면 어떤 사유로 되돌렸는지 기록을 할 수 있다는 장점이 있다.

- CLI

  ```
  $ git revert [commit id] // git log를 사용하여 커밋아이디를 학인 후 돌아가고 싶은 시점으로 변경
  ```

- Source Tree
  1. 커밋 목록에서 되돌리고 싶은 커밋을 선택한다.
  2. 커밋을 우클릭 후 '커밋 되돌리기' 버튼을 클릭한다.